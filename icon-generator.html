<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YRK Icon Generator - Y R K MAHA BAZAAR</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .upload-area {
            border: 2px dashed #E50914;
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            background: linear-gradient(135deg, rgba(229, 9, 20, 0.05), rgba(247, 198, 0, 0.05));
            transition: all 0.3s ease;
        }

        .upload-area:hover {
            border-color: #F7C600;
            background: linear-gradient(135deg, rgba(229, 9, 20, 0.1), rgba(247, 198, 0, 0.1));
        }

        .icon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .icon-item {
            text-align: center;
            padding: 0.5rem;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .icon-item:hover {
            border-color: #E50914;
            box-shadow: 0 2px 8px rgba(229, 9, 20, 0.2);
        }

        .icon-preview {
            width: 48px;
            height: 48px;
            object-fit: contain;
            margin: 0 auto 0.5rem;
        }
    </style>
</head>
<body class="bg-light">
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <!-- Header -->
                <div class="text-center mb-5">
                    <h1 class="display-4 fw-bold text-primary mb-3">
                        <i class="fas fa-icons me-2"></i>YRK Icon Generator
                    </h1>
                    <p class="lead text-muted">Generate all website icons from your logo for complete branding</p>
                </div>

                <!-- Upload Area -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-upload me-2"></i>Upload Your Logo
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="upload-area" id="uploadArea">
                            <div class="mb-3">
                                <i class="fas fa-cloud-upload-alt fa-4x text-primary mb-3"></i>
                                <h4>Drop your logo here or click to browse</h4>
                                <p class="text-muted mb-4">
                                    Upload PNG or JPG (Max 10MB)<br>
                                    Will generate all PWA icons automatically
                                </p>
                                <input type="file" class="form-control" id="logoInput" accept="image/*" style="display: none;">
                                <button type="button" class="btn btn-primary btn-lg" onclick="document.getElementById('logoInput').click();">
                                    <i class="fas fa-folder-open me-2"></i>Choose Logo File
                                </button>
                            </div>
                        </div>

                        <div class="mt-3 text-center">
                            <button type="button" class="btn btn-success btn-lg" id="generateBtn" style="display: none;">
                                <i class="fas fa-magic me-2"></i>Generate All Icons
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Icon Preview -->
                <div class="card mb-4" id="iconPreview" style="display: none;">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-eye me-2"></i>Generated Icons Preview
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="icon-grid" id="iconGrid">
                            <!-- Icons will be displayed here -->
                        </div>

                        <div class="mt-3 text-center">
                            <div class="alert alert-success">
                                <i class="fas fa-check-circle me-2"></i>
                                <strong>Icons Generated Successfully!</strong><br>
                                All icons have been created and are ready for use across your website and PWA.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Information -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-info-circle me-2"></i>What Gets Generated
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6><i class="fas fa-mobile-alt text-primary me-2"></i>PWA Icons:</h6>
                                <ul class="list-unstyled small">
                                    <li>✅ 72×72px, 96×96px, 128×128px</li>
                                    <li>✅ 144×144px, 152×152px, 192×192px</li>
                                    <li>✅ 384×384px, 512×512px</li>
                                    <li>✅ Browser tab favicon</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6><i class="fas fa-image text-success me-2"></i>Logo Files:</h6>
                                <ul class="list-unstyled small">
                                    <li>✅ Main hero logo (800×800px)</li>
                                    <li>✅ High-resolution version (400×400px)</li>
                                    <li>✅ PNG format with transparency</li>
                                    <li>✅ Optimized for web display</li>
                                </ul>
                            </div>
                        </div>

                        <div class="alert alert-info mt-3">
                            <h6><i class="fas fa-lightbulb text-warning me-2"></i>Pro Tips:</h6>
                            <ul class="mb-0 small">
                                <li>Use a high-quality logo with transparent background</li>
                                <li>Square logos work best for icon generation</li>
                                <li>Generated icons will be used for PWA, browser tabs, and mobile apps</li>
                                <li>All icons are optimized for fast loading</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Drag and drop functionality
        const uploadArea = document.getElementById('uploadArea');
        const logoInput = document.getElementById('logoInput');
        const generateBtn = document.getElementById('generateBtn');
        const iconPreview = document.getElementById('iconPreview');
        const iconGrid = document.getElementById('iconGrid');

        // Drag and drop events
        uploadArea.addEventListener('dragover', function(e) {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', function(e) {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', function(e) {
            e.preventDefault();
            uploadArea.classList.remove('dragover');

            const files = e.dataTransfer.files;
            if (files.length > 0) {
                logoInput.files = files;
                generateBtn.style.display = 'inline-block';

                // Show preview
                const file = files[0];
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        // Update upload area with preview
                        uploadArea.innerHTML = `
                            <div class="mb-3">
                                <img src="${e.target.result}" alt="Logo Preview" class="img-fluid" style="max-height: 200px; border-radius: 10px;">
                                <h5 class="mt-3">Ready to generate icons!</h5>
                                <p class="text-muted">Click the button below to create all website icons from this logo.</p>
                                <button type="button" class="btn btn-success btn-lg" onclick="generateIcons()">
                                    <i class="fas fa-magic me-2"></i>Generate All Icons
                                </button>
                            </div>
                        `;
                    };
                    reader.readAsDataURL(file);
                }
            }
        });

        // File input change
        logoInput.addEventListener('change', function(e) {
            if (e.target.files.length > 0) {
                generateBtn.style.display = 'inline-block';

                // Show preview
                const file = e.target.files[0];
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        uploadArea.innerHTML = `
                            <div class="mb-3">
                                <img src="${e.target.result}" alt="Logo Preview" class="img-fluid" style="max-height: 200px; border-radius: 10px;">
                                <h5 class="mt-3">Ready to generate icons!</h5>
                                <p class="text-muted">Click the button below to create all website icons from this logo.</p>
                                <button type="button" class="btn btn-success btn-lg" onclick="generateIcons()">
                                    <i class="fas fa-magic me-2"></i>Generate All Icons
                                </button>
                            </div>
                        `;
                    };
                    reader.readAsDataURL(file);
                }
            }
        });

        // Generate icons function
        function generateIcons() {
            const file = logoInput.files[0];
            if (file) {
                // Show loading
                generateBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Generating Icons...';
                generateBtn.disabled = true;

                // Create form data
                const formData = new FormData();
                formData.append('logo', file);
                formData.append('action', 'generate_icons');

                // Upload and generate
                fetch('generate-icons.php', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        // Show success
                        generateBtn.innerHTML = '<i class="fas fa-check me-2"></i>Icons Generated!';
                        generateBtn.className = 'btn btn-success btn-lg';

                        // Show icon preview
                        showIconPreview(data.icons_created);

                        setTimeout(() => {
                            location.reload();
                        }, 2000);
                    } else {
                        alert('Generation failed: ' + data.message);
                        generateBtn.innerHTML = '<i class="fas fa-magic me-2"></i>Generate All Icons';
                        generateBtn.disabled = false;
                    }
                })
                .catch(error => {
                    alert('Generation error: ' + error.message);
                    generateBtn.innerHTML = '<i class="fas fa-magic me-2"></i>Generate All Icons';
                    generateBtn.disabled = false;
                });
            }
        }

        // Show generated icons preview
        function showIconPreview(count) {
            iconPreview.style.display = 'block';

            // Icon sizes that were generated
            const iconSizes = [72, 96, 128, 144, 152, 192, 384, 512];

            iconGrid.innerHTML = '';

            iconSizes.forEach(size => {
                const iconItem = document.createElement('div');
                iconItem.className = 'icon-item';
                iconItem.innerHTML = `
                    <img src="assets/images/icons/icon-${size}x${size}.png?v=${Date.now()}"
                         alt="${size}x${size} icon"
                         class="icon-preview">
                    <small class="text-muted">${size}×${size}</small>
                `;
                iconGrid.appendChild(iconItem);
            });
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
